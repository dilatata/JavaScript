<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Booking</title>
</head>

<body>
    newbookingid, newownerid, newroomno, newbookingdate, newchindate, newchoutdate, newcancel,newdogname, newdogsize,
    newdogbreed ,newprice
    <form method="POST" action="/booking">
        <div>
            <label for="ownerid">고객 아이디</label>
            <input type="text" id="newownerid" placeholder="고객 id" name="ownerid" />
        </div>
        <div>
            <!-- <label for="roomno">예약 호실</label>
            <input type="text" id="newroomno" placeholder="예약 호실" name="roomno" /> -->
            <label for="roomno">Choose a room:</label>
            <select id="newroomno" name="roomno">
                <option value="1">중형1실</option>
                <option value="2">중형2실</option>
                <option value="3">중형3실</option>
                <option value="4">중형4실</option>
                <option value="5">대형5실</option>
                <option value="6">대형6실</option>
                <option value="7">대형7실</option>
                <option value="8" selected>대형8실</option>
            </select>
        </div>
        <div>
            <!-- sysdate 가능한지 확인하기 -->
            <label for="bookingdate">오늘날짜</label>
            <input type="text" id="newbookingdate" placeholder="오늘 날짜" name="bookingdate" />
        </div>
        <div>
            <label for="chindate">checkin</label>
            <input type="text" id="newchindate" placeholder="YY/MM/DD" name="chindate" />
        </div>
        <div>
            <label for="choutdate">checkout</label>
            <input type="text" id="newchoutdate" placeholder="YY/MM/DD" name="choutdate" />
        </div>
        <div>
            <!-- 자동으로 0 입력되게 만들면 되는지 -->
            <label for="cancel">입력창</label>
            <input type="text" id="newcancel" placeholder="0을 입력해 주세요" name="cancel" />
        </div>
        <div>
            <label for="dogname">강아지 이름</label>
            <input type="text" id="newdogname" placeholder="강아지 이름" name="dogname" />
        </div>
        <div>
            <label for="dogsize">강아지 몸무게</label>
            <input type="text" id="newdogsize" placeholder="강아지 몸무게" name="dogsize" />
        </div>
        <div>
            <label for="dogbreed">견종</label>
            <input type="text" id="newdogbreed" placeholder="견종" name="dogbreed" />
        </div>
        <div>
            <!-- 비어있다가 입력된 날짜 * 해당 방의 가격으로 비동기 출력되도록 -->
            <label for="price">총 금액</label>
            <input type="text" id="newprice" placeholder="총 금액" name="price" />
        </div>
        <button type="submit" onclick="insertbooking()">등록확인</button>
    </form>
    </div>
    <script>

        function insertbooking() {
            const xttp = new XMLHttpRequest();
            xttp.onreadystatechange = function () {
                if (this.responseText == 4 && this.status == 200) {
                    data = this.responseText;
                    data = JSON.parse(data)

 
                    document.getElementById("ownerid").value = data.ownerid;
                    document.getElementById("roomno").value = data.password;
                    document.getElementById("bookingdate").value = data.bookingdata;
                    document.getElementById("chindate").value = data.chindate;
                    document.getElementById("choutdate").value = data.choutdate;
                    document.getElementById("cancel").value = data.cancel;
                    document.getElementById("dogname").value = data.dogname;
                    document.getElementById("dogsize").value = data.dogsize;
                    document.getElementById("dogbreed").value = data.dogbreed;
                    document.getElementById("price").value = data.price;
                }
            };
            xttp.open("POST", "booking");
            xttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

            book ="ownerid=" + document.getElementById("newownerid").value
                + "&roomno=" + document.getElementById("newroomno").value
                + "&bookingdate=" + document.getElementById("newbookingdate").value
                + "&chindate" + document.getElementById("newchindate").value
                + "&choutdate" + document.getElementById("newchoutdate").value
                + "&cancel" + document.getElementById("newcancel").value
                + "&dogname" + document.getElementById("newdogname").value
                + "&dogsize" + document.getElementById("newdogsize").value
                + "&dogbreed" + document.getElementById("newdogbreed").value
                + "&price" + document.getElementById("newprice").value

            xttp.send(book);
        }

    </script>



</body>

</html>